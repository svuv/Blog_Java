# ä¸ªäººæŠ€æœ¯åšå®¢é¡¹ç›® - å¼€å‘æŒ‡å¯¼å’Œå­¦ä¹ è·¯å¾„

## å­¦ä¹ ç›®æ ‡

é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œä½ å°†æŒæ¡ï¼š

1. Spring Boot å¤šæ•°æ®æºé…ç½®å’Œç®¡ç†
2. MySQLã€MongoDBã€Redis çš„ç»¼åˆåº”ç”¨
3. å¤šçº¿ç¨‹ç¼–ç¨‹å’Œå¼‚æ­¥å¤„ç†
4. åˆ†å¸ƒå¼é”å’Œå¹¶å‘æ§åˆ¶
5. ç¼“å­˜ç­–ç•¥å’Œæ€§èƒ½ä¼˜åŒ–

## å¼€å‘æ­¥éª¤å’Œå­¦ä¹ è·¯å¾„

### ç¬¬ä¸€é˜¶æ®µï¼šç¯å¢ƒæ­å»ºå’ŒåŸºç¡€é…ç½® (1-2 å¤©)

#### 1.1 æ•°æ®åº“ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£…MySQL
# åˆ›å»ºæ•°æ®åº“
CREATE DATABASE blog CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# å®‰è£…MongoDB
# åˆ›å»ºæ•°æ®åº“å’Œé›†åˆ
use blog
db.createCollection("articles")
db.createCollection("comments")

# å®‰è£…Redis
# å¯åŠ¨RedisæœåŠ¡
redis-server
```

#### 1.2 é…ç½®æ–‡ä»¶è®¾ç½®

åˆ›å»º `application.yml` é…ç½®å¤šæ•°æ®æºï¼š

```yaml
spring:
  application:
    name: blog

  # MySQLé…ç½®
  datasource:
    mysql:
      url: jdbc:mysql://localhost:3306/blog?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
      username: root
      password: your_password
      driver-class-name: com.mysql.cj.jdbc.Driver

    # Druidè¿æ¥æ± é…ç½®
    druid:
      initial-size: 5
      min-idle: 5
      max-active: 20
      max-wait: 60000
      validation-query: SELECT 1
      test-while-idle: true

  # MongoDBé…ç½®
  data:
    mongodb:
      uri: mongodb://localhost:27017/blog

    # Redisé…ç½®
    redis:
      host: localhost
      port: 6379
      timeout: 2000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0

# MyBatisé…ç½®
mybatis:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.whh.blog.entity

# çº¿ç¨‹æ± é…ç½®
async:
  executor:
    core-pool-size: 5
    max-pool-size: 10
    queue-capacity: 1000
    thread-name-prefix: blog-async-
```

**å­¦ä¹ é‡ç‚¹**ï¼š

- ç†è§£å¤šæ•°æ®æºé…ç½®åŸç†
- æŒæ¡è¿æ¥æ± å‚æ•°è°ƒä¼˜
- äº†è§£ä¸åŒæ•°æ®åº“çš„è¿æ¥æ–¹å¼

### ç¬¬äºŒé˜¶æ®µï¼šæ•°æ®æ¨¡å‹è®¾è®¡ (2-3 å¤©)

#### 2.1 MySQL å®ä½“è®¾è®¡

åˆ›å»ºç”¨æˆ·å’Œæ–‡ç« åŸºç¡€ä¿¡æ¯å®ä½“ï¼š

```java
// Userå®ä½“ - å­˜å‚¨åœ¨MySQL
@Entity
@Table(name = "users")
@Data
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(unique = true)
    private String username;

    private String email;
    private String password;

    @CreationTimestamp
    private LocalDateTime createTime;

    @UpdateTimestamp
    private LocalDateTime updateTime;

    @Version
    private Integer version; // ä¹è§‚é”
}

// Articleå®ä½“ - åŸºç¡€ä¿¡æ¯å­˜å‚¨åœ¨MySQL
@Entity
@Table(name = "articles")
@Data
public class Article {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String title;
    private String summary;
    private Long authorId;
    private String category;
    private Integer viewCount;

    @CreationTimestamp
    private LocalDateTime createTime;

    @UpdateTimestamp
    private LocalDateTime updateTime;

    @Version
    private Integer version;
}
```

#### 2.2 MongoDB æ–‡æ¡£è®¾è®¡

```java
// ArticleContent - æ–‡ç« å†…å®¹å­˜å‚¨åœ¨MongoDB
@Document(collection = "article_contents")
@Data
public class ArticleContent {
    @Id
    private String id;

    private Long articleId; // å…³è”MySQLä¸­çš„æ–‡ç« ID
    private String content; // Markdownå†…å®¹
    private List<String> tags;

    @CreatedDate
    private LocalDateTime createTime;

    @LastModifiedDate
    private LocalDateTime updateTime;
}

// Comment - è¯„è®ºå­˜å‚¨åœ¨MongoDB
@Document(collection = "comments")
@Data
public class Comment {
    @Id
    private String id;

    private Long articleId;
    private Long userId;
    private String content;
    private String parentId; // çˆ¶è¯„è®ºIDï¼Œæ”¯æŒåµŒå¥—å›å¤
    private Integer likeCount;

    @CreatedDate
    private LocalDateTime createTime;
}
```

**å­¦ä¹ é‡ç‚¹**ï¼š

- çº¯ POJO å®ä½“è®¾è®¡
- MyBatis å®ä½“æ˜ å°„åŸç†
- MongoDB æ–‡æ¡£è®¾è®¡åŸåˆ™
- å…³ç³»å‹å’Œæ–‡æ¡£å‹æ•°æ®çš„å…³è”è®¾è®¡

### ç¬¬ä¸‰é˜¶æ®µï¼šMyBatis Mapper å¼€å‘ (2-3 å¤©)

#### 3.0 åˆ›å»º Mapper æ¥å£å’Œ XML æ˜ å°„æ–‡ä»¶

```java
// UserMapperæ¥å£
@Mapper
public interface UserMapper {

    User selectById(Long id);

    List<User> selectAll();

    int insert(User user);

    int updateById(User user);

    int deleteById(Long id);

    User selectByUsername(String username);

    // åˆ†é¡µæŸ¥è¯¢
    List<User> selectByPage(@Param("offset") int offset, @Param("limit") int limit);

    int countAll();
}

// ArticleMapperæ¥å£
@Mapper
public interface ArticleMapper {

    Article selectById(Long id);

    List<Article> selectAll();

    int insert(Article article);

    int updateById(Article article);

    int deleteById(Long id);

    List<Article> selectByAuthorId(Long authorId);

    List<Article> selectByCategory(String category);

    // ä¹è§‚é”æ›´æ–°
    int updateByIdWithVersion(@Param("article") Article article, @Param("oldVersion") Integer oldVersion);

    // å¢åŠ æµè§ˆé‡
    int incrementViewCount(Long id);
}
```

å¯¹åº”çš„ XML æ˜ å°„æ–‡ä»¶ï¼š

```xml
<!-- UserMapper.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.whh.blog.mapper.UserMapper">

    <resultMap id="BaseResultMap" type="com.whh.blog.entity.User">
        <id column="id" property="id" jdbcType="BIGINT"/>
        <result column="username" property="username" jdbcType="VARCHAR"/>
        <result column="email" property="email" jdbcType="VARCHAR"/>
        <result column="password" property="password" jdbcType="VARCHAR"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
        <result column="version" property="version" jdbcType="INTEGER"/>
    </resultMap>

    <sql id="Base_Column_List">
        id, username, email, password, create_time, update_time, version
    </sql>

    <select id="selectById" parameterType="java.lang.Long" resultMap="BaseResultMap">
        SELECT <include refid="Base_Column_List"/>
        FROM users
        WHERE id = #{id}
    </select>

    <insert id="insert" parameterType="com.whh.blog.entity.User" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO users (username, email, password, create_time, update_time, version)
        VALUES (#{username}, #{email}, #{password}, NOW(), NOW(), 1)
    </insert>

    <update id="updateById" parameterType="com.whh.blog.entity.User">
        UPDATE users
        SET username = #{username},
            email = #{email},
            update_time = NOW(),
            version = version + 1
        WHERE id = #{id}
    </update>

</mapper>
```

### ç¬¬å››é˜¶æ®µï¼šå¤šæ•°æ®æºé…ç½® (2-3 å¤©)

#### 3.1 MySQL æ•°æ®æºé…ç½®

```java
@Configuration
@MapperScan(basePackages = "com.whh.blog.mapper", sqlSessionFactoryRef = "mysqlSqlSessionFactory")
public class MysqlConfig {

    @Primary
    @Bean
    @ConfigurationProperties("spring.datasource.druid")
    public DataSource mysqlDataSource() {
        return DruidDataSourceBuilder.create().build();
    }

    @Primary
    @Bean
    public SqlSessionFactory mysqlSqlSessionFactory(@Qualifier("mysqlDataSource") DataSource dataSource) throws Exception {
        SqlSessionFactoryBean bean = new SqlSessionFactoryBean();
        bean.setDataSource(dataSource);
        bean.setMapperLocations(new PathMatchingResourcePatternResolver()
            .getResources("classpath:mapper/*.xml"));

        // é…ç½®MyBatisè®¾ç½®
        org.apache.ibatis.session.Configuration configuration = new org.apache.ibatis.session.Configuration();
        configuration.setMapUnderscoreToCamelCase(true);
        configuration.setCacheEnabled(true);
        bean.setConfiguration(configuration);

        return bean.getObject();
    }

    @Primary
    @Bean
    public DataSourceTransactionManager mysqlTransactionManager(@Qualifier("mysqlDataSource") DataSource dataSource) {
        return new DataSourceTransactionManager(dataSource);
    }
}
```

#### 3.2 MongoDB é…ç½®

```java
@Configuration
@EnableMongoRepositories(basePackages = "com.whh.blog.repository.mongo")
public class MongoConfig {

    @Bean
    public MongoTransactionManager mongoTransactionManager(MongoDatabaseFactory factory) {
        return new MongoTransactionManager(factory);
    }
}
```

#### 3.3 Redis é…ç½®

```java
@Configuration
@EnableCaching
public class RedisConfig {

    @Bean
    public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory factory) {
        RedisTemplate<String, Object> template = new RedisTemplate<>();
        template.setConnectionFactory(factory);

        // è®¾ç½®åºåˆ—åŒ–å™¨
        template.setKeySerializer(new StringRedisSerializer());
        template.setValueSerializer(new GenericJackson2JsonRedisSerializer());

        return template;
    }

    @Bean
    public CacheManager cacheManager(RedisConnectionFactory factory) {
        RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig()
            .entryTtl(Duration.ofMinutes(30))
            .serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(new StringRedisSerializer()))
            .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(new GenericJackson2JsonRedisSerializer()));

        return RedisCacheManager.builder(factory)
            .cacheDefaults(config)
            .build();
    }
}
```

**å­¦ä¹ é‡ç‚¹**ï¼š

- MyBatis å¤šæ•°æ®æºé…ç½®åŸç†
- SqlSessionFactory é…ç½®
- äº‹åŠ¡ç®¡ç†å™¨çš„ä½œç”¨
- Redis åºåˆ—åŒ–é…ç½®

### ç¬¬äº”é˜¶æ®µï¼šå¤šçº¿ç¨‹é…ç½®å’Œå¼‚æ­¥å¤„ç† (3-4 å¤©)

#### 4.1 çº¿ç¨‹æ± é…ç½®

```java
@Configuration
@EnableAsync
public class AsyncConfig implements AsyncConfigurer {

    @Bean("taskExecutor")
    public ThreadPoolTaskExecutor taskExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(5);
        executor.setMaxPoolSize(10);
        executor.setQueueCapacity(1000);
        executor.setThreadNamePrefix("blog-async-");
        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());
        executor.initialize();
        return executor;
    }

    @Override
    public Executor getAsyncExecutor() {
        return taskExecutor();
    }

    @Override
    public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {
        return new SimpleAsyncUncaughtExceptionHandler();
    }
}
```

#### 4.2 åˆ†å¸ƒå¼é”é…ç½®

```java
@Configuration
public class RedissonConfig {

    @Bean
    public RedissonClient redissonClient() {
        Config config = new Config();
        config.useSingleServer()
            .setAddress("redis://localhost:6379")
            .setConnectionMinimumIdleSize(5)
            .setConnectionPoolSize(10);

        return Redisson.create(config);
    }
}
```

#### 4.3 å¼‚æ­¥æœåŠ¡å®ç°

```java
@Service
@Slf4j
public class AsyncService {

    @Async("taskExecutor")
    public CompletableFuture<Void> updateArticleIndex(Long articleId) {
        log.info("å¼‚æ­¥æ›´æ–°æ–‡ç« ç´¢å¼•: {}", articleId);
        // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
        try {
            Thread.sleep(2000);
            // æ›´æ–°æœç´¢ç´¢å¼•é€»è¾‘
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
        return CompletableFuture.completedFuture(null);
    }

    @Async("taskExecutor")
    public void sendNotification(String message) {
        log.info("å¼‚æ­¥å‘é€é€šçŸ¥: {}", message);
        // å‘é€é‚®ä»¶æˆ–æ¶ˆæ¯é€šçŸ¥
    }
}
```

**å­¦ä¹ é‡ç‚¹**ï¼š

- çº¿ç¨‹æ± å‚æ•°è°ƒä¼˜
- å¼‚æ­¥æ–¹æ³•çš„ä½¿ç”¨
- åˆ†å¸ƒå¼é”çš„åº”ç”¨åœºæ™¯

### ç¬¬å…­é˜¶æ®µï¼šä¸šåŠ¡é€»è¾‘å®ç° (4-5 å¤©)

#### 6.1 ç”¨æˆ·æœåŠ¡

```java
@Service
@Transactional
public class UserService {

    @Autowired
    private UserMapper userMapper;

    @Autowired
    private RedisTemplate<String, Object> redisTemplate;

    @Cacheable(value = "users", key = "#id")
    public User findById(Long id) {
        return userMapper.selectById(id);
    }

    @CacheEvict(value = "users", key = "#user.id")
    public User updateUser(User user) {
        userMapper.updateById(user);
        return userMapper.selectById(user.getId());
    }

    public User createUser(User user) {
        userMapper.insert(user);
        return user; // MyBatisä¼šè‡ªåŠ¨è®¾ç½®ç”Ÿæˆçš„ID
    }

    // åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·
    public PageInfo<User> findUsersByPage(int pageNum, int pageSize) {
        PageHelper.startPage(pageNum, pageSize);
        List<User> users = userMapper.selectAll();
        return new PageInfo<>(users);
    }
}
```

#### 6.2 æ–‡ç« æœåŠ¡ï¼ˆå¤šæ•°æ®æºæ“ä½œï¼‰

```java
@Service
public class ArticleService {

    @Autowired
    private ArticleMapper articleMapper; // MySQL

    @Autowired
    private ArticleContentRepository contentRepository; // MongoDB

    @Autowired
    private AsyncService asyncService;

    @Autowired
    private RedissonClient redissonClient;

    @Autowired
    private RedisTemplate<String, Object> redisTemplate;

    @Transactional("mysqlTransactionManager")
    public Article createArticle(ArticleCreateRequest request) {
        // 1. ä¿å­˜æ–‡ç« åŸºç¡€ä¿¡æ¯åˆ°MySQL
        Article article = new Article();
        article.setTitle(request.getTitle());
        article.setSummary(request.getSummary());
        article.setAuthorId(request.getAuthorId());
        article.setCategory(request.getCategory());
        article.setViewCount(0);
        articleMapper.insert(article);

        // 2. ä¿å­˜æ–‡ç« å†…å®¹åˆ°MongoDB
        ArticleContent content = new ArticleContent();
        content.setArticleId(article.getId());
        content.setContent(request.getContent());
        content.setTags(request.getTags());
        contentRepository.save(content);

        // 3. å¼‚æ­¥æ›´æ–°æœç´¢ç´¢å¼•
        asyncService.updateArticleIndex(article.getId());

        return article;
    }

    public void incrementViewCount(Long articleId) {
        RLock lock = redissonClient.getLock("article:view:" + articleId);
        try {
            if (lock.tryLock(1, 10, TimeUnit.SECONDS)) {
                // ä½¿ç”¨Redisè®¡æ•°å™¨
                String key = "article:view:count:" + articleId;
                redisTemplate.opsForValue().increment(key);

                // å¼‚æ­¥åŒæ­¥åˆ°æ•°æ®åº“
                asyncService.syncViewCountToDatabase(articleId);
            }
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        } finally {
            if (lock.isHeldByCurrentThread()) {
                lock.unlock();
            }
        }
    }

    // ä¹è§‚é”æ›´æ–°æ–‡ç« 
    public boolean updateArticleWithOptimisticLock(Article article) {
        Integer oldVersion = article.getVersion();
        article.setVersion(oldVersion + 1);
        int result = articleMapper.updateByIdWithVersion(article, oldVersion);
        return result > 0;
    }

    // åˆ†é¡µæŸ¥è¯¢æ–‡ç« 
    public PageInfo<Article> findArticlesByPage(int pageNum, int pageSize) {
        PageHelper.startPage(pageNum, pageSize);
        List<Article> articles = articleMapper.selectAll();
        return new PageInfo<>(articles);
    }
}
```

**å­¦ä¹ é‡ç‚¹**ï¼š

- MyBatis Mapper æ¥å£çš„ä½¿ç”¨
- XML æ˜ å°„æ–‡ä»¶ç¼–å†™
- è·¨æ•°æ®æºäº‹åŠ¡å¤„ç†
- ç¼“å­˜æ³¨è§£çš„ä½¿ç”¨
- åˆ†å¸ƒå¼é”çš„å®é™…åº”ç”¨
- ä¹è§‚é”çš„ MyBatis å®ç°
- PageHelper åˆ†é¡µæ’ä»¶ä½¿ç”¨

### ç¬¬ä¸ƒé˜¶æ®µï¼šæ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§ (2-3 å¤©)

#### 6.1 ç¼“å­˜ç­–ç•¥ä¼˜åŒ–

```java
@Service
public class CacheService {

    @Autowired
    private RedisTemplate<String, Object> redisTemplate;

    // ç¼“å­˜ç©¿é€é˜²æŠ¤
    public Object getWithBloomFilter(String key) {
        // å¸ƒéš†è¿‡æ»¤å™¨æ£€æŸ¥
        if (!bloomFilter.mightContain(key)) {
            return null;
        }

        Object value = redisTemplate.opsForValue().get(key);
        if (value == null) {
            // æŸ¥è¯¢æ•°æ®åº“
            value = queryFromDatabase(key);
            if (value != null) {
                redisTemplate.opsForValue().set(key, value, Duration.ofMinutes(30));
            }
        }
        return value;
    }

    // ç¼“å­˜é›ªå´©é˜²æŠ¤
    public void setWithRandomExpire(String key, Object value) {
        long expire = 1800 + new Random().nextInt(600); // 30-40åˆ†é’Ÿéšæœºè¿‡æœŸ
        redisTemplate.opsForValue().set(key, value, Duration.ofSeconds(expire));
    }
}
```

#### 6.2 ç›‘æ§é…ç½®

```yaml
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
  metrics:
    export:
      prometheus:
        enabled: true
```

**å­¦ä¹ é‡ç‚¹**ï¼š

- ç¼“å­˜å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ
- åº”ç”¨ç›‘æ§æŒ‡æ ‡çš„é…ç½®
- æ€§èƒ½è°ƒä¼˜æŠ€å·§

### ç¬¬å…«é˜¶æ®µï¼šæµ‹è¯•å’Œéƒ¨ç½² (2-3 å¤©)

#### 7.1 å•å…ƒæµ‹è¯•

```java
@SpringBootTest
@Testcontainers
class ArticleServiceTest {

    @Container
    static MySQLContainer<?> mysql = new MySQLContainer<>("mysql:8.0")
            .withDatabaseName("blog_test")
            .withUsername("test")
            .withPassword("test");

    @Container
    static MongoDBContainer mongodb = new MongoDBContainer("mongo:5.0");

    @Container
    static GenericContainer<?> redis = new GenericContainer<>("redis:6.2")
            .withExposedPorts(6379);

    @Test
    void testCreateArticle() {
        // æµ‹è¯•æ–‡ç« åˆ›å»ºåŠŸèƒ½
    }

    @Test
    void testConcurrentViewCount() {
        // æµ‹è¯•å¹¶å‘è®¿é—®è®¡æ•°
    }
}
```

#### 7.2 æ€§èƒ½æµ‹è¯•

ä½¿ç”¨ JMeter æˆ–å…¶ä»–å·¥å…·è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œé‡ç‚¹æµ‹è¯•ï¼š

- å¹¶å‘è¯»å†™æ€§èƒ½
- ç¼“å­˜å‘½ä¸­ç‡
- æ•°æ®åº“è¿æ¥æ± ä½¿ç”¨æƒ…å†µ
- çº¿ç¨‹æ± ä½¿ç”¨æƒ…å†µ

**å­¦ä¹ é‡ç‚¹**ï¼š

- é›†æˆæµ‹è¯•çš„ç¼–å†™
- æ€§èƒ½æµ‹è¯•æ–¹æ³•
- å®¹å™¨åŒ–éƒ¨ç½²

## å­¦ä¹ å»ºè®®å’Œæ³¨æ„äº‹é¡¹

### å­¦ä¹ é¡ºåºå»ºè®®

1. **å…ˆç†è®ºåå®è·µ**ï¼šæ¯ä¸ªé˜¶æ®µå¼€å§‹å‰å…ˆå­¦ä¹ ç›¸å…³ç†è®ºçŸ¥è¯†
2. **é€æ­¥é€’è¿›**ï¼šä¸è¦è·³è·ƒå¼å¼€å‘ï¼Œç¡®ä¿æ¯ä¸ªé˜¶æ®µéƒ½å®Œå…¨ç†è§£
3. **å¤šåšå®éªŒ**ï¼šå°è¯•ä¸åŒçš„é…ç½®å‚æ•°ï¼Œè§‚å¯Ÿæ€§èƒ½å˜åŒ–
4. **è®°å½•é—®é¢˜**ï¼šé‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆè¦è¯¦ç»†è®°å½•

### å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

1. **æ•°æ®æºé…ç½®å†²çª**ï¼šæ³¨æ„@Primary æ³¨è§£çš„ä½¿ç”¨
2. **äº‹åŠ¡ä¸ç”Ÿæ•ˆ**ï¼šæ£€æŸ¥@Transactional æ³¨è§£çš„é…ç½®
3. **ç¼“å­˜ä¸ç”Ÿæ•ˆ**ï¼šç¡®è®¤@EnableCaching æ³¨è§£å·²æ·»åŠ 
4. **å¼‚æ­¥æ–¹æ³•ä¸æ‰§è¡Œ**ï¼šæ£€æŸ¥@EnableAsync é…ç½®å’Œæ–¹æ³•è°ƒç”¨æ–¹å¼

### æ‰©å±•å­¦ä¹ æ–¹å‘

1. **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šé›†æˆ RabbitMQ æˆ– Kafka
2. **æœç´¢å¼•æ“**ï¼šé›†æˆ Elasticsearch
3. **å¾®æœåŠ¡**ï¼šæ‹†åˆ†ä¸ºå¤šä¸ªå¾®æœåŠ¡
4. **å®¹å™¨åŒ–**ï¼šä½¿ç”¨ Docker éƒ¨ç½²
5. **ç›‘æ§å‘Šè­¦**ï¼šé›†æˆ Grafana å’Œ AlertManager

é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œä½ å°†è·å¾—å¤šæ•°æ®åº“å¤„ç†å’Œå¤šçº¿ç¨‹ç¼–ç¨‹çš„å®æˆ˜ç»éªŒï¼Œä¸ºåç»­çš„é«˜å¹¶å‘ç³»ç»Ÿå¼€å‘æ‰“ä¸‹åšå®åŸºç¡€ã€‚

## ğŸ’¡ çº¯ MyBatis å­¦ä¹ çš„ç‰¹æ®Šä»·å€¼

### ä¸ºä»€ä¹ˆé€‰æ‹©çº¯ MyBatis è€Œä¸æ˜¯ JPAï¼Ÿ

1. **SQL æ§åˆ¶åŠ›æ›´å¼º**

   - æ‰‹åŠ¨ç¼–å†™ SQLï¼Œå®Œå…¨æ§åˆ¶æŸ¥è¯¢é€»è¾‘
   - æ›´å®¹æ˜“è¿›è¡Œ SQL ä¼˜åŒ–å’Œè°ƒè¯•
   - é€‚åˆå¤æ‚æŸ¥è¯¢å’ŒæŠ¥è¡¨å¼€å‘

2. **å­¦ä¹ æ›²çº¿æ›´æ¸…æ™°**

   - ç†è§£ SQL æ˜ å°„çš„åº•å±‚åŸç†
   - æŒæ¡ ResultMap çš„é…ç½®æŠ€å·§
   - å­¦ä¼šåŠ¨æ€ SQL çš„ç¼–å†™

3. **æ€§èƒ½ä¼˜åŒ–ç©ºé—´å¤§**

   - å¯ä»¥é’ˆå¯¹å…·ä½“ä¸šåŠ¡ç¼–å†™æœ€ä¼˜ SQL
   - é¿å… ORM æ¡†æ¶çš„æ€§èƒ½æŸè€—
   - æ›´å¥½åœ°åˆ©ç”¨æ•°æ®åº“ç‰¹æ€§

4. **ä¼ä¸šçº§é¡¹ç›®å¸¸ç”¨**
   - å¤§å¤šæ•°ä¼ä¸šé¡¹ç›®ä½¿ç”¨ MyBatis
   - æ›´å¥½çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§
   - å›¢é˜Ÿåä½œæ›´å®¹æ˜“

### MyBatis æ ¸å¿ƒå­¦ä¹ è¦ç‚¹

1. **Mapper æ¥å£è®¾è®¡**ï¼šæ–¹æ³•å‘½åè§„èŒƒã€å‚æ•°ä¼ é€’
2. **XML æ˜ å°„æ–‡ä»¶**ï¼šResultMap é…ç½®ã€SQL ç¼–å†™
3. **åŠ¨æ€ SQL**ï¼šifã€chooseã€foreach ç­‰æ ‡ç­¾ä½¿ç”¨
4. **åˆ†é¡µå¤„ç†**ï¼šPageHelper æ’ä»¶çš„ä½¿ç”¨
5. **ç¼“å­˜æœºåˆ¶**ï¼šä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜
6. **äº‹åŠ¡ç®¡ç†**ï¼šä¸ Spring äº‹åŠ¡çš„é›†æˆ
