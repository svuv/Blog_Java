# 个人技术博客项目 - 功能和技术细节

## 项目概述
这是一个基于Spring Boot的个人技术博客项目，主要用于学习多数据库处理和多线程技术。项目采用现代化的技术栈，实现了关系型数据库、非关系型数据库和缓存的综合应用。

## 核心技术栈

### 基础框架
- **Spring Boot 3.5.4** - 主框架
- **Java 17** - 编程语言
- **Maven** - 项目管理工具

### 数据存储层
- **MySQL** - 关系型数据库，存储结构化数据
- **MongoDB** - 文档数据库，存储非结构化数据
- **Redis** - 内存数据库，用于缓存和会话管理

### 数据访问层
- **MyBatis** - SQL映射框架，手动编写Mapper接口和XML映射文件
- **PageHelper** - MyBatis分页插件，提供物理分页功能
- **Spring Data MongoDB** - MongoDB操作框架
- **Spring Data Redis** - Redis操作框架
- **Druid** - 数据库连接池，提供监控功能

### 多线程和并发
- **Spring AOP** - 面向切面编程，实现异步处理
- **@Async** - Spring异步注解
- **ThreadPoolTaskExecutor** - 线程池管理
- **Redisson** - 分布式锁实现

### 工具和监控
- **Lombok** - 简化Java代码
- **Hutool** - Java工具类库
- **SpringDoc OpenAPI** - API文档生成
- **Spring Boot Actuator** - 应用监控
- **Micrometer** - 指标收集

## 项目功能模块

### 1. 用户管理模块
- **存储方式**: MySQL (用户基本信息) + Redis (会话缓存)
- **功能**: 用户注册、登录、个人信息管理
- **技术点**: MyBatis手动映射、Redis会话管理

### 2. 文章管理模块
- **存储方式**: MySQL (文章元数据) + MongoDB (文章内容)
- **功能**: 文章发布、编辑、删除、分类管理
- **技术点**: MyBatis多数据源配置、手动SQL编写、事务管理

### 3. 评论系统
- **存储方式**: MongoDB (评论内容) + Redis (热门评论缓存)
- **功能**: 评论发布、回复、点赞
- **技术点**: MongoDB文档操作、Redis缓存策略

### 4. 搜索功能
- **存储方式**: MongoDB全文搜索 + Redis搜索结果缓存
- **功能**: 文章搜索、标签搜索
- **技术点**: MongoDB索引、Redis缓存优化

### 5. 统计分析模块
- **存储方式**: MySQL (统计数据) + Redis (实时计数)
- **功能**: 访问统计、文章阅读量、用户活跃度
- **技术点**: 异步统计、Redis计数器

## 多数据库处理技术

### 数据源配置
```yaml
# MySQL配置
spring.datasource.mysql.url=jdbc:mysql://localhost:3306/blog
spring.datasource.mysql.driver-class-name=com.mysql.cj.jdbc.Driver

# MongoDB配置
spring.data.mongodb.uri=mongodb://localhost:27017/blog

# Redis配置
spring.data.redis.host=localhost
spring.data.redis.port=6379
```

### 事务管理
- **MySQL事务**: 使用@Transactional注解
- **MongoDB事务**: 使用MongoTransactionManager
- **分布式事务**: 考虑使用Seata或手动补偿

### 数据一致性策略
- **最终一致性**: 异步同步数据
- **读写分离**: MySQL主从配置
- **缓存更新**: Redis缓存失效策略

## 多线程处理技术

### 线程池配置
- **核心线程数**: 根据CPU核心数配置
- **最大线程数**: 核心线程数的2倍
- **队列容量**: 1000
- **拒绝策略**: CallerRunsPolicy

### 异步处理场景
1. **文章索引更新** - 异步更新搜索索引
2. **邮件发送** - 异步发送通知邮件
3. **统计数据计算** - 异步计算访问统计
4. **缓存预热** - 异步预加载热门数据

### 并发控制
- **分布式锁**: 使用Redisson实现
- **乐观锁**: MyBatis版本控制字段
- **悲观锁**: 数据库行锁和MyBatis select for update

## 性能优化策略

### 缓存策略
- **一级缓存**: MyBatis SqlSession缓存
- **二级缓存**: Redis应用缓存
- **查询缓存**: 复杂查询结果缓存

### 数据库优化
- **索引优化**: 合理创建数据库索引
- **查询优化**: 避免N+1查询问题
- **连接池优化**: Druid连接池配置

### 监控和调优
- **应用监控**: Actuator健康检查
- **性能指标**: Micrometer指标收集
- **日志分析**: 结构化日志输出

## 安全考虑
- **SQL注入防护**: 使用参数化查询
- **NoSQL注入防护**: MongoDB查询参数验证
- **缓存穿透防护**: 布隆过滤器
- **并发安全**: 线程安全的数据操作

## 测试策略
- **单元测试**: 使用JUnit 5
- **集成测试**: 使用TestContainers
- **性能测试**: JMeter压力测试
- **数据库测试**: 嵌入式数据库测试